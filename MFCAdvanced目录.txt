
MFC���׽̳�����ǳ����
https://www.bilibili.com/video/av48954369


һ����������
SDK:
JDK:
IDE: VS Qt

API:Ӧ�ó���ӿ�
WINAPI:windowsƽ̨�µ�ϵͳ���ã�windows.h������ϵͳ�ṩ������ӿڣ��õ�ϵͳ����Դ��
���ڣ������ں��Ӵ��ڣ��ͻ����ͷǿͻ�����

������ṹ����������ھ��HWND��ͼ������HICO
��Ϣ���� ��Ϣ ���ڹ��̺���

PostMessage
SendMessage

main()
WinMain()//WINAPI ��ڵ�ַ

����winAPI���ڳ���
1��������ں���WinMain
2������һ������
    a����ƴ�����WDNCLASS������Ա������ֵ��
    b��ע�ᴰ����
    c����������
    d����ʾ�͸��´���
3����Ϣѭ�� WM_QUIT�˳�����
4�����ڹ��̺���

����һ��MCF���򣨴����룩
1��Ӧ�ó��� CWinApp
2������� CFrameWnd

1������ֻ��һ��ȫ�ֵ�Ӧ�ó��������
2���ڳ�����ں���ʵ�ֹ��� InitInstance()
    A���������MyFrame����̬����ռ䣨�Զ��������Ĺ��캯����
        a�������MyFrame�����캯���������洴������ CWnd::Create
    B������������ʾ���� CWnd::ShowWindow
    C������������´��� CWnd::UpdateWindow
    D�������������ָ�� CWinThread::m_pMainWnd

�¼�������
��Ϣӳ��
1�����������࣬������Ϣӳ���
	// ������Ϣӳ���
	DECLARE_MESSAGE_MAP()
2����Ӧ��.cpp�����
    //������Ϣ��
    BEGIN_MESSAGE_MAP(MyFrame, CFrameWnd)
        ON_WM_LBUTTONDOWN()
    END_MESSAGE_MAP()
3����Ӧ���У���Ϣ��������������
4����Ӧ.cpp��Ϣ���������Ķ���

�ġ������򵼴�������
1���ĵ���ͼ�ṹ
�ĵ�������һ���࣬�����ר�����洢����
��ͼ������һ���࣬�����ר����ʾ���޸�����
����ࣺһ���������������װ����ͼ
2�������Ƚ���Ҫ�ĺ���
Ӧ�ó����ࣺInitInstance()��������ڵ�ַ
�����CMainFrame��
    PreCreateWindow()��������֮ǰ����
    OnCreate()�������ں󣬴���WM_CREATE,����WM_CREATE��Ϣ��������
��ͼ��CView��
    OnDraw():��ͼ
    WM_PAINT��Ϣ��������OnPaint()�ڲ�����OnDraw()
    OnPaint()��OnDrawͬ�´��ڣ�ֻ��OnPaint()��Ч
3��������Ϣ
a����ܺ���ͼ������
    ѡ��������->�һ�->����->��Ϣ->WM_LBUTTONDOWN->ADD
    ��ܾ��൱����������������ͼ
    ��ͼ�൱�ڱ�ֽ
�ġ��ַ���
ANSI ���ֽڣ����ֽ�
char p[] = "123456";//һ���ַ�һ���ֽ�
unicode ���ַ���һ���ַ�2���ֽ�
w_char *p = L"abc";//һ���ַ������ֽ�
MFC ����Ӧ�ַ���
TCHAR���Զ���Ӧ�ֽڣ��������룩
TEXT("")
_T("")
�塢��չ
afx_xxxxx:ȫ�ֺ�����������ĳ��������
xxxEx: xxxW, ��չ

MFC�����淶��
�����ͺ���������������ĸд
class MyClass{};
void SetName(){}
�����βΣ��ڶ������ʿ�ʼ������ĸ��д
isFlag
isPressTest
��Ա������
m_xxxx
m_hWnd

1���뻭ͼ����һ��windowsƽ̨����Ϣѭ��ʱ������һ�����̣�
2��ͨ��WinAPIʵ�����³���
a��������ڣ���ȡ��������꣬ͨ���Ի�����ʾ������
b�����̰��£��ϡ��¡����ң���ͨ���Ի���ʾ����
3��WinAPI��MFC��ʲô�������ϵ��

�ڶ��죨��ͼ���ı���̡��˵���
    1���򵥻�ͼ
        ��ֱ��
        a)��갴�º�̧��
        b���������Ҷ���CClientDC
        c�������յ�
            CDC::MoveTo
            CDC::LineTo
        d��ѡ��������->�һ�->���ӱ���
    2����ˢ�ͻ��ʵ�ʹ��
        a�����廭��
        b�����廭�ʣ���ˢ��
        c���ѻ��ʽ������� CDC::SelectObject
    3�������ʹ��
    4��������� CFont
    5���˵���ز���
�����ı��༭��
1�����������CWnd::CreateSolidCaret()
    a������CWnd::CreateSolidCaret()
    b����ʾCWnd::ShowCaret()
    c��������ĸ߶��Ǹ�������ĸ߶���ȷ��
        ��ȡ������ϢCDC::GetTextMetrics()
    d�����ò����λ��CWnd::SetCaretPos()
2�����ַ���Ϣ����������д��
    a��д��CDC::TextOut()
    b����ȡ�ַ����ĳߴ���ϢCDC::GetTextExtent()
    c����ȡ�ַ�����CString�����ָ�����ȵ��ַ�str.Left(str.GetLength() - 1);
�������彥��
1����ʱ����ʹ��
    a�����ö�ʱ����CWnd::SetTimer()
    b���رն�ʱ����CWnd::KillTimer()
    c����ʱ����Ϣ��WM_TIMER
2����ͼ���е�OnDraw()�У�д��CDC::TextOutW()
3��ָ������д�֣�CDC::DrawText()
4���ô���ʧЧ������WM_PAINT����ӵ���OnDraw()������CWnd::Invalidate
�ġ��˵�����ز���
1���˵���������Ӧ����
    a����ʽ�˵���ID���ɱ༭������ȥ������һ���˵���
    b���ǵ�ʽ�˵���ID�ɱ༭
    C���˵���Ӧ������Ϣ��·�ɣ�˳��
    d����Ϣ����
        �Ǳ�׼��Ϣ
        WM_COMMAD��������Ϣ��ͨ����Ϣ��CCmdTarget��CWnd���������ܽ��ܵ��Ǳ�׼��Ϣ
        ��׼��Ϣ WM_XXXX CWnd������ܽ��ܵ���׼��Ϣ
        ������ϢWM_COMMAD
        CWnd���Խ����κ���Ϣ
        CCmdTarget���ܽ����κ���Ϣ
2���˵���ؾ�̬����
�ڿ�����н�����Ӧ��������OnCreate()��ʵ��
    A����ȡ�˵�����CWnd::GetMenu
    B����ȡ�˵����е��Ӳ˵���CMenu::GetSubMenu
        a����־�˵���CMenu::CheckMenuItem
            MF_BYPOSITION��ͨ��λ��
        b������Ĭ�ϲ˵��� CMenu����SetDefaultItem
            ע�⣺һ���˵���ֻ������һ��Ĭ�ϲ˵�
        c�����ò˵���CMenu::EnableMenuItem
            ע�⣺��Ҫ��CFrameWnd::m_bAutoMenuEnable��Ա��������ΪFALSE
        d���ָ���
    C���Ƴ��˵�CWnd::SetMenu
        SetMenu(NULL);
    D��װ�ز˵�
        a�������˵� CMenu::LoadMenu
        b�����ò˵� CWnd::SetMenu
        c����CMenu�����з���Windows�˵�CMenu::Detch
    E���˵�������»���
    F����ݲ˵��������˵���һ��Ҫ�����½��˵�������ʹ�ÿ��������˵���
        �����������������ͼ����������Ҫ����ͼ���д���
        a����������һ�ʱ��WM_RBUTTONDOWN
        b����ȡ������Ӳ˵�
        c�������˵��� CMenu::TrackPopupMenu
        d���ͻ�������ת�����꣺CWnd::ClientToScreen
3���˵���ض�̬����
    a�������ղ˵� CMenu::CreateMenu
    b����ѵ�ʽ�˵�CMenu::AppendMenu(MF_POPUP, )
        ÿ���˵�����һ���˵������CMenu::m_hMenu
        �ػ��˵�����CWnd::DrawMenuBar
    c��׷����ͨ�˵�CMenu::AppendMenu(MF_STRING, );
    d������˵� CMenu::InsertMenu
    e��ɾ���˵� CMenu::DeleteMenu
�塢��̬ͼ��
1����ʱ���� CWnd::SetTimer
    a����ʱ���źţ�WM_TIMER
    b�����ö�ʱ��Ӧ�÷���OnCreate
2�������Զ���ͼ�꣨WinAIP����LoadIcon()
    a������ԴIDת��Ϊ�ַ��� MAKEINTRESOURCE()
    b����ȡӦ�ó���ʵ����
        AfxGetInstanceHandle()
        AfxGetApp()->m_hInstance()
3������ͼ�꣨WinAPI��SetClassLong()
    ���ھ����CWnd::m_hWnd


�����죨�Ի��򡢳��ÿؼ���
    1����̬ͼ����������ʱ����
    2���Ի���ģ̬�ͷ�ģ̬��
        1��ģ̬�Ի���
            a����Դ��ͼ->Dialog->�һ�->����Dialog
            b�������Ի������CDialog
            c����ģ̬��ʽ����CDialog::DoModal
        2����ģ̬�Ի���
            a����Դ��ͼ->Dialog->�һ�->����Dialog
            b�������Ի��������Ҫ��.h�ĵط�������Ա����CDialog
            c�������Ի����ڹ��캯����OnCreate()��Ŀ��ֻ����һ�Σ�CDialog::Create
            d����ʾ����CWnd::ShowWindow
        3���Զ���Ի����ࣨ��Ҫ��
            a����Դ��ͼ->Dialog->�һ�->����Dialog
            b������Ի���ģ��->�һ�->������
            c�����һ���Զ����࣬.h�����и�ö�ٺͶԻ������enum{IDD=IDD_DIALOG2}
    3�����ڶԻ���ı��
        1�����ڶԻ������ó�����
            a��Ӧ�ó����ࣺ�̳���CWinApp
                InitInstance()��������ڵ�ַ
            b���Ի����ࣺ�̳���CDialogEx
                OnInitDialog()���Ի���ĳ�ʼ������
                DoDataExchange()���ؼ��ͱ����Ĺ����ͽ���
    4�����ÿؼ���ʹ��
        1����̬�ؼ�CStatic��Qt�еı�ǩQLabel��
            ��ʾһЩ������Ϣ
            a��Caption���޸���ʾ������
            b��ID��XXXX_STATIC����̬ID����Ӱ���κ���Ϣ���¼���
        2����ťCButton
            a��Caption���޸���ʾ������
            b��������Ϣ BN_CLICKED���û������ť�Զ�������
                1������->�ؼ��¼�->ѡ�������¼�
                2��˫����ť���Զ�������Ϣ��������
<<<<<<< HEAD
=======
        3������
            b��������������
                1��Number->true ֮�E��ʱ��������
                2��Passward->true����ģʽ
                3��Want return->true���ܻ��лس���ֻ���ڶ���ģʽ�£����ܻ���
                4��Multiline->true����ģʽ 
                5��Auto VScroll->true 
                Vertical croll
                6��ReadOnly->trueֻ��
            c������С����
                ����Control���ؼ����ͣ�ֻ�ܹ���һ��
                    1����ȡ�༭�����ݣ�CWnd::GetWindowText
                    2�����ñ༭�����ݣ�CWnd::SetWindowText
                    3���رնԻ��򴰿�
                        CDialog::OnOk()
                        CDialog::OnCancel()
        5����ѡ�򣬸�ѡ��
>>>>>>> 新增代码
�����죨�ĵ�����ͼ�����ݿ��̣�
    1���ĵ���ͼ�ṹ����
    2��CArchive���ʹ��
    3��MFC odbc�������ݿ�

������͵����죺ҩƷ������ϵͳ
    



DemoWin01
    WindowsAPI����

DemoMFC01
    MFC����
DemoMFC02
    ��Ϣӳ��
DemoMFC03
    ���ĵ�
DemoMFC04
    �������̰��µļ�
    ������ ���� ������ ������Ϣ ̧����Ϣ
    CClientDC dc(this);
	dc.MoveTo(m_point);
	dc.LineTo(point);
    ���������� ����ƶ���Ϣ MouseMove
    ����λͼ
    ��ˢ ���� ���� ����
DemoMFC05
    ���������
DemoMFC06
    ��ʱ��
DemoMFC07
    �˵�
    	//����ת��
	ClientToScreen(&point);
DemoMFC08
    ��ʱ�� �޸�ͼ��
    //�޸�ͼ��
	SetClassLongPtr(m_hWnd, GCLP_HICON, (LONG_PTR)icon[i]);
DemoMFC09
    ����ͼ��
	pDC->DrawIcon(10, i*50, hicon[i]);
DemoMFC10
    ģ̬��
        ģ̬�Ի���
        ��ģ̬�Ի���
        �Զ���ģ̬�Ի���
DemoMFC11
    ���ڶԻ������ܰ�ť��





